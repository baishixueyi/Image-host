{"version":3,"sources":["pages/Login.js"],"names":["LoginBox","styled","div","Title","h1","StyleButton","Button","Component","observer","AuthStore","useStore","history","useHistory","tailLayout","wrapperCol","offset","span","labelCol","name","initialValues","remember","onFinish","values","console","log","setUsername","username","setPassword","password","Login","then","push","catch","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","undefined","Promise","resolve","test","reject","length","min","max","Password","type","htmlType"],"mappings":"qNAOMA,EAAWC,IAAOC,IAAV,+JAORC,EAAQF,IAAOG,GAAV,8EAILC,EAAcJ,YAAOK,IAAPL,CAAH,oLASXM,EAAYC,aAAS,WACvB,IAAQC,EAAcC,cAAdD,UACFE,EAAUC,cAKVC,EAAa,CACfC,WAAY,CAAEC,OAAQ,EAAGC,KAAM,KA0BnC,OACI,kBAAChB,EAAD,KACI,kBAACG,EAAD,qBACA,kBAAC,IAAD,iBAlCO,CACXc,SAAU,CAAED,KAAM,GAClBF,WAAY,CAAEE,KAAM,KAgChB,CAEIE,KAAK,QACLC,cAAe,CAAEC,UAAU,GAC3BC,SA/BK,SAAAC,GACbC,QAAQC,IAAI,WAAYF,GACxBb,EAAUgB,YAAYH,EAAOI,UAC7BjB,EAAUkB,YAAYL,EAAOM,UAC7BnB,EAAUoB,QAAQC,MAAK,WACnBP,QAAQC,IAAI,gEACZb,EAAQoB,KAAK,QACdC,OAAM,kBAAIT,QAAQC,IAAI,gCAyBjBS,eAtBW,SAAAC,GACnBX,QAAQC,IAAI,UAAWU,MAuBf,kBAAC,IAAKC,KAAN,CACIC,MAAM,qBACNlB,KAAK,WACLmB,MAAO,CACH,CAAEC,UAAU,EAAMC,QAAS,yCAC3B,CAAEC,UA1BG,SAACC,EAAKC,GAE3B,OADAnB,QAAQC,IAAIkB,QACDC,IAARD,EACQE,QAAQC,UAEZ,KAAKC,KAAKJ,GAAeE,QAAQG,OAAO,gEACxCL,EAAMM,OAAO,GAAKN,EAAMM,OAAO,GAAWJ,QAAQG,OAAO,4CACrDH,QAAQC,cAuBP,kBAAC,IAAD,OAGJ,kBAAC,IAAKV,KAAN,CACIC,MAAM,eACNlB,KAAK,WACLmB,MAAO,CACH,CAAEC,UAAU,EAAMC,QAAS,mCAC3B,CAAEU,IAAI,EAAEV,QAAQ,mCAChB,CAAEW,IAAI,GAAGX,QAAQ,sCAGrB,kBAAC,IAAMY,SAAP,OAGJ,kBAAC,IAAKhB,KAAStB,EACX,kBAACR,EAAD,CAAa+C,KAAK,UAAUC,SAAS,UAArC,sBASL9C","file":"static/js/10.a5b538dd.chunk.js","sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react'\nimport { Form, Input, Button} from 'antd';\nimport styled from 'styled-components'\nimport { useStore } from '../stores'\nimport { useHistory } from 'react-router-dom'\n\nconst LoginBox = styled.div`\n    width:400px;\n    margin:50px auto;\n    box-shadow:2px 2px 4px 0 rgba(0,0,0,0.3);\n    border-radius:4px;\n    padding:20px;\n`\nconst Title = styled.h1`\n    text-align:center;\n    margin-bottom: 30px;\n`\nconst StyleButton = styled(Button)`\n    margin-left:10px;\n    background:#006d75;\n    border:#006d75;\n    &:hover,&:focus{\n        background:#006d75;\n        border:#006d75;\n    }\n`\nconst Component = observer(() => {\n    const { AuthStore } = useStore()\n    const history = useHistory()\n    const layout = {\n        labelCol: { span: 6 },\n        wrapperCol: { span: 16 },\n    };\n    const tailLayout = {\n        wrapperCol: { offset: 6, span: 16 },\n    };\n    const onFinish = values => {\n        console.log('Success:', values);\n        AuthStore.setUsername(values.username)\n        AuthStore.setPassword(values.password)\n        AuthStore.Login().then(()=>{\n            console.log('登录成功，跳转到首页')\n            history.push('/')\n        }).catch(()=>console.log('登录失败'))\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.log('Failed:', errorInfo);\n    };\n    const validateUsername = (rule,value)=>{\n        console.log(value)\n        if(value===undefined){\n            return Promise.resolve();\n        }else{\n            if(/\\W/.test(value)) return Promise.reject('只能是字母数字下划线');\n            if(value.length<4 || value.length>10) return Promise.reject('长度为4~10个字符');\n            return Promise.resolve();\n        }\n        \n    }\n    return (\n        <LoginBox>\n            <Title>登录</Title>\n            <Form\n                {...layout}\n                name=\"basic\"\n                initialValues={{ remember: true }}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n            >\n                <Form.Item\n                    label=\"用户名\"\n                    name=\"username\"\n                    rules={[\n                        { required: true, message: '请输入用户名!' },\n                        { validator:validateUsername}\n                \n                ]}\n                >\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    label=\"密码\"\n                    name=\"password\"\n                    rules={[\n                        { required: true, message: '请输入密码!' },\n                        { min:4,message:'最少4个字符'},\n                        { max:10,message:'最大10个字符'}\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n\n                <Form.Item {...tailLayout}>\n                    <StyleButton type=\"primary\" htmlType=\"submit\">\n                        登录\n                </StyleButton>\n                </Form.Item>\n            </Form>\n        </LoginBox>\n    )\n})\n\nexport default Component"],"sourceRoot":""}