(this["webpackJsonpepic-image"]=this["webpackJsonpepic-image"]||[]).push([[3],{101:function(e,t,n){e.exports=n(134)},106:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=(n(106),n(27)),u=n(90),l=n.n(u),s=n(41),p=n(6),f=n(28),b=n(135),m=n(69),g=n(71);function h(){var e=Object(c.a)(["\n    margin-left:10px;\n    background:#006d75;\n    border:#006d75;\n    &:hover,&:focus{\n        background:#006d75;\n        border:#006d75;\n    }\n"]);return h=function(){return e},e}function y(){var e=Object(c.a)(["\n    margin-left:auto;\n    color:#fff;\n"]);return y=function(){return e},e}function O(){var e=Object(c.a)(["\n    margin-left:30px;\n    color:#595959;\n    &.active{\n        color:#fff;\n        border-bottom:1px solid #fff;\n    }\n    &:hover{\n        color:#fff;\n    }\n"]);return O=function(){return e},e}function j(){var e=Object(c.a)(["\nheight:30px;\n"]);return j=function(){return e},e}function d(){var e=Object(c.a)(["\ndisplay:flex;\nalign-items:center;\npadding:10px 100px;\nbackground-color:#141414;\n"]);return d=function(){return e},e}var v=f.a.header(d()),w=f.a.img(j()),E=Object(f.a)(s.b)(O()),U=f.a.div(y()),P=Object(f.a)(b.a)(h()),k=Object(m.a)((function(){var e=Object(g.a)(),t=e.AuthStore,n=e.userStore,a=Object(p.f)();return Object(r.useEffect)((function(){n.pullUser()}),[]),o.a.createElement(v,null,o.a.createElement(w,{src:l.a}),o.a.createElement("nav",null,o.a.createElement(E,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(E,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(E,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),o.a.createElement(U,null,n.currentUser?o.a.createElement(o.a.Fragment,null,n.currentUser.attributes.username,o.a.createElement(P,{type:"primary",onClick:function(){console.log("\u6ce8\u9500"),t.Logout()}},"\u6ce8\u9500")," "):o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{type:"primary",onClick:function(){a.push("/login")}},"\u767b\u5f55"),o.a.createElement(P,{type:"primary",onClick:function(){a.push("/register")}},"\u6ce8\u518c"))))}));function z(){var e=Object(c.a)(["\n    background-color:#f5f5f5;\n    color:#595959;\n    text-align:center;\n    font-size:12px;\n    padding:10px;\n"]);return z=function(){return e},e}var L=f.a.footer(z());var x=function(){return o.a.createElement(L,null,"\u8bf7\u52ff\u4e0a\u4f20\u8fdd\u53cd\u4e2d\u56fd\u5927\u9646\u548c\u9999\u6e2f\u6cd5\u5f8b\u7684\u56fe\u7247\uff0c\u8fdd\u8005\u540e\u679c\u81ea\u8d1f\u3002")};var F=function(){return o.a.createElement("div",null,"Loading...")},D=(n(133),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(10)]).then(n.bind(null,332))}))),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(9)]).then(n.bind(null,333))})),C=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,322))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,323))})),q=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,324))}));var A=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(F,null)},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0},o.a.createElement(D,null)),o.a.createElement(p.a,{path:"/history"},o.a.createElement(S,null)),o.a.createElement(p.a,{path:"/about"},o.a.createElement(C,null)),o.a.createElement(p.a,{path:"/login"},o.a.createElement(I,null)),o.a.createElement(p.a,{path:"/register"},o.a.createElement(q,null))))),o.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(s.a,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),o=n(11),a=n(29),i=n(30),c=n(2),u=(n(52),n(1)),l=n(17),s=n.n(l);s.a.init({appId:"f1rxvy1F1sLsQBOwzq98gMfI-gzGzoHsz",appKey:"541IAS9xvWN6K7g7SlljmcJ8",serverURL:"https://uqbaasqm.lc-cn-n1-shared.com"});var p,f,b,m,g,h,y,O,j,d,v,w,E,U,P,k=function(e,t){console.log(e+"---"+t);var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},z=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},L=function(){l.User.logOut()},x=function(){return console.log(l.User.current()),l.User.current()},F=function(e,t){var n=new s.a.Object("Image"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",l.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},D=function(e,t){var n=new s.a.Query("Image");return n.equalTo("owner",l.User.current()),n.descending("createdAt"),n.limit(t),n.skip((e-1)*t),new Promise((function(e,t){n.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},S=new(p=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"currentUser",f,this)}return Object(i.a)(e,[{key:"pullUser",value:function(){this.currentUser=x()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),C=new(b=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"filename",m,this),Object(o.a)(this,"file",g,this),Object(o.a)(this,"isUploading",h,this),Object(o.a)(this,"serverFile",y,this)}return Object(i.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,new Promise((function(t,n){F(e.file,e.filename).then((function(n){t(n),e.serverFile=n})).catch((function(e){console.log("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.filename="",this.file=null,this.serverFile=null}}]),e}(),m=Object(c.a)(b.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=Object(c.a)(b.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=Object(c.a)(b.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(c.a)(b.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(b.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"setFilename"),b.prototype),Object(c.a)(b.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"setFile"),b.prototype),Object(c.a)(b.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"upload"),b.prototype),Object(c.a)(b.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"reset"),b.prototype),b),I=n(136),q=new(O=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"list",j,this),Object(o.a)(this,"isLoading",d,this),Object(o.a)(this,"hasMore",v,this),Object(o.a)(this,"page",w,this),this.pagesize=12}return Object(i.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,D(this.page,this.pagesize).then((function(t){e.append(t),e.page++,t.length<e.pagesize&&(e.hasMore=!1)})).catch((function(e){I.b.error("\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.page=1}}]),e}(),j=Object(c.a)(O.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(c.a)(O.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(c.a)(O.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=Object(c.a)(O.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Object(c.a)(O.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"append"),O.prototype),Object(c.a)(O.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"find"),O.prototype),Object(c.a)(O.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(O.prototype,"reset"),O.prototype),O),A=new(E=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"isLoading",U,this),Object(o.a)(this,"values",P,this)}return Object(i.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"Login",value:function(){var e=this;return console.log("\u767b\u5f55\u4e2d\u3002\u3002\u3002"),this.isLoading=!0,new Promise((function(t,n){z(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){n(e)}))}))}},{key:"register",value:function(){var e=this;return console.log("\u6ce8\u518c\u4e2d\u3002\u3002\u3002"),this.isLoading=!0,new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"Logout",value:function(){this.isLogin=!1,console.log("\u5df2\u6ce8\u9500"),L(),S.resetUser(),C.reset(),q.reset()}}]),e}(),U=Object(c.a)(E.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(c.a)(E.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(E.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(E.prototype,"setUsername"),E.prototype),Object(c.a)(E.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(E.prototype,"setPassword"),E.prototype),Object(c.a)(E.prototype,"Login",[u.f],Object.getOwnPropertyDescriptor(E.prototype,"Login"),E.prototype),Object(c.a)(E.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(E.prototype,"register"),E.prototype),Object(c.a)(E.prototype,"Logout",[u.f],Object.getOwnPropertyDescriptor(E.prototype,"Logout"),E.prototype),E),M=Object(r.createContext)({AuthStore:A,userStore:S,imageStore:C,historyStore:q}),N=function(){return Object(r.useContext)(M)}},90:function(e,t,n){e.exports=n.p+"static/media/logo.f99739d8.svg"}},[[101,4,5]]]);
//# sourceMappingURL=main.92fc754b.chunk.js.map