{"version":3,"sources":["pages/Register.js"],"names":["LoginBox","styled","div","Title","h1","StyleButton","Button","Component","observer","AuthStore","useStore","history","useHistory","tailLayout","wrapperCol","offset","span","labelCol","name","initialValues","remember","onFinish","values","console","log","setUsername","username","setPassword","password","register","then","res","push","catch","error","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","undefined","Promise","resolve","test","reject","length","min","max","Password","getFieldValue","type","htmlType"],"mappings":"gvBAOA,IAAMA,EAAWC,IAAOC,IAAV,KAORC,EAAQF,IAAOG,GAAV,KAILC,EAAcJ,YAAOK,IAAPL,CAAH,KASXM,EAAYC,aAAS,WAAO,IACtBC,EAAcC,cAAdD,UACFE,EAAUC,cAKVC,EAAa,CACfC,WAAY,CAAEC,OAAQ,EAAGC,KAAM,KA+BnC,OACI,kBAAChB,EAAD,KACI,kBAACG,EAAD,qBACA,kBAAC,IAAD,iBAvCO,CACXc,SAAU,CAAED,KAAM,GAClBF,WAAY,CAAEE,KAAM,KAqChB,CAEIE,KAAK,QACLC,cAAe,CAAEC,UAAU,GAC3BC,SApCK,SAAAC,GACbC,QAAQC,IAAI,WAAYF,GACxBb,EAAUgB,YAAYH,EAAOI,UAC7BjB,EAAUkB,YAAYL,EAAOM,UAC7BnB,EAAUoB,WAAWC,MAAK,SAAAC,GACtBR,QAAQC,IAAI,iEACZb,EAAQqB,KAAK,aAEdC,OAAM,SAAAC,GAAK,OAAEX,QAAQC,IAAI,gCA6BpBW,eA1BW,SAAAC,GACnBb,QAAQC,IAAI,UAAWY,MA2Bf,kBAAC,IAAKC,KAAN,CACIC,MAAM,qBACNpB,KAAK,WACLqB,MAAO,CACH,CAAEC,UAAU,EAAMC,QAAS,yCAC3B,CAAEC,UA9BG,SAACC,EAAKC,GAC3B,YAAWC,IAARD,EACQE,QAAQC,UAEZ,KAAKC,KAAKJ,GAAeE,QAAQG,OAAO,gEACxCL,EAAMM,OAAO,GAAKN,EAAMM,OAAO,GAAWJ,QAAQG,OAAO,4CACrDH,QAAQC,cA4BP,kBAAC,IAAD,OAGJ,kBAAC,IAAKV,KAAN,CACIC,MAAM,eACNpB,KAAK,WACLqB,MAAO,CACH,CAAEC,UAAU,EAAMC,QAAS,mCAC3B,CAAEU,IAAI,EAAEV,QAAQ,mCAChB,CAAEW,IAAI,GAAGX,QAAQ,sCAGrB,kBAAC,IAAMY,SAAP,OAGJ,kBAAC,IAAKhB,KAAN,CACIC,MAAM,2BACNpB,KAAK,mBACLqB,MAAO,CACH,CAAEC,UAAU,EAAMC,QAAS,yCA5CvB,SAAC,GAAD,IAAEa,EAAF,EAAEA,cAAF,MAAoB,CACxCZ,UADwC,SAC9BC,EAAKC,GACX,OAAGU,EAAc,cAAcV,EAAcE,QAAQC,UAC9CD,QAAQG,OAAO,mDA6Cd,kBAAC,IAAMI,SAAP,OAGJ,kBAAC,IAAKhB,KAASxB,EACX,kBAACR,EAAD,CAAakD,KAAK,UAAUC,SAAS,UAArC,sBASLjD","file":"static/js/12.f5aa8c1d.chunk.js","sourcesContent":["import { observer } from 'mobx-react'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { Form, Input, Button} from 'antd';\nimport { useStore } from '../stores'\nimport { useHistory } from 'react-router-dom'\n\nconst LoginBox = styled.div`\n    width:400px;\n    margin:50px auto;\n    box-shadow:2px 2px 4px 0 rgba(0,0,0,0.3);\n    border-radius:4px;\n    padding:20px;\n`\nconst Title = styled.h1`\n    text-align:center;\n    margin-bottom: 30px;\n`\nconst StyleButton = styled(Button)`\n    margin-left:10px;\n    background:#006d75;\n    border:#006d75;\n    &:hover,&:focus{\n        background:#006d75;\n        border:#006d75;\n    }\n`\nconst Component = observer(() => {\n    const { AuthStore } = useStore()\n    const history = useHistory()\n    const layout = {\n        labelCol: { span: 6 },\n        wrapperCol: { span: 16 },\n    };\n    const tailLayout = {\n        wrapperCol: { offset: 6, span: 16 },\n    };\n    const onFinish = values => {\n        console.log('Success:', values);\n        AuthStore.setUsername(values.username)\n        AuthStore.setPassword(values.password)\n        AuthStore.register().then(res=>{\n            console.log('注册成功,跳转到登录页')\n            history.push('/login')\n\n        }).catch(error=>console.log('注册失败'))\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.log('Failed:', errorInfo);\n    };\n    const validateUsername = (rule,value)=>{\n        if(value===undefined){\n            return Promise.resolve();\n        }else{\n            if(/\\W/.test(value)) return Promise.reject('只能是字母数字下划线');\n            if(value.length<4 || value.length>10) return Promise.reject('长度为4~10个字符');\n            return Promise.resolve();\n        }\n    }\n    const validateConfirm = ({getFieldValue})=>({\n        validator(rule,value){\n            if(getFieldValue('password')===value) return Promise.resolve();\n            return Promise.reject('两次密码不一致')\n        }\n    })\n    return (\n        <LoginBox>\n            <Title>注册</Title>\n            <Form\n                {...layout}\n                name=\"basic\"\n                initialValues={{ remember: true }}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n            >\n                <Form.Item\n                    label=\"用户名\"\n                    name=\"username\"\n                    rules={[\n                        { required: true, message: '请输入用户名!' },\n                        { validator:validateUsername}\n                \n                ]}\n                >\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    label=\"密码\"\n                    name=\"password\"\n                    rules={[\n                        { required: true, message: '请输入密码!' },\n                        { min:4,message:'最少4个字符'},\n                        { max:10,message:'最大10个字符'}\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n\n                <Form.Item\n                    label=\"确认密码\"\n                    name=\"comfirm-password\"\n                    rules={[\n                        { required: true, message: '再次确认密码!' },\n                        validateConfirm\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n\n                <Form.Item {...tailLayout}>\n                    <StyleButton type=\"primary\" htmlType=\"submit\">\n                        提交\n                </StyleButton>\n                </Form.Item>\n            </Form>\n        </LoginBox>\n    )\n})\n\nexport default Component"],"sourceRoot":""}